<html><head></head>
<body><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); ">启动顺序： &nbsp;先启动mysql &nbsp;启动php &nbsp;最后启动nginx</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); "><br></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); ">[root@k8s-registry compose_lnmp]# cat docker-compose.yml&nbsp;</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">version: '3'</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">services:</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; nginx:</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; hostname: nginx</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; build:</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; context: ./nginx</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; dockerfile: Dockerfile</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; ports:</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; - 80:80</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; links:</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; </span><span class="Apple-style-span" style="background-color: rgb(255, 255, 0);"><b>&nbsp; &nbsp; - php:php-cgi</b></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; volumes:</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; - ./wwwroot:/usr/local/nginx/html</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);"><br></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; php:</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; hostname: php</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; build: ./php</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; links:</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; - mysql:mysql-db</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; volumes:</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; - ./wwwroot:/usr/local/nginx/html</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);"><br></span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; mysql:</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; hostname: mysql</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; image: mysql:5.6</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; ports:</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; - 3306:3306</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; volumes:</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; - ./mysql/conf:/etc/mysql/conf.d</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; - ./mysql/data:/var/lib/mysql</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; # command: --character-set-server=utf8</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; environment:</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; MYSQL_ROOT_PASSWORD: 123456</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; MYSQL_DATABASE: wordpress</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255);">&nbsp; &nbsp; &nbsp; MYSQL_USER: user</span></div><div><span class="Apple-style-span" style="background-color: rgb(255, 255, 255); ">&nbsp; &nbsp; &nbsp; MYSQL_PASSWORD: user123</span></div>

</body></html>